webpackJsonp([1],{128:function(t,e,s){"use strict";var n=s(92),a=s(127),r=s(137),i=(s.n(r),s(138)),o=this;n.a.use(a.a);var c=new Date,u=new a.a.Store({state:{user:{name:"YTTJamie",img:"../static/images/3.jpg"},session:[{id:1,user:{name:"Lucy",img:"../static/images/1.jpg"},message:[{content:"你们已经成为好友，现在可以开始聊天了哦～",date:c,sender:1},{content:"你好～",date:c,sender:0}]},{id:2,user:{name:"Join",img:"../static/images/2.jpg"},message:[{content:"你们已经成为好友，现在可以开始聊天了哦～",date:c,sender:1}]}],isCurrentId:1},getters:{state:function(t){return o.state}},modules:{content:i.a},actions:r});e.a=u},131:function(t,e,s){s(353);var n=s(48)(s(132),s(363),null,null);t.exports=n.exports},132:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(362),a=s.n(n),r=s(359),i=s.n(r),o=s(360),c=s.n(o),u=s(361),l=s.n(u);e.default={components:{userCard:a.a,contactLists:i.a,message:c.a,messageText:l.a}}},133:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={mounted:function(){var t=localStorage.getItem("messageData"),e=this;t?e.$store.dispatch("initData",{msgData:JSON.parse(t),callback:function(){e.$refs.listItem[0].click()}}):e.$refs.listItem[0].click()},computed:{session:function(){return this.$store.state.session},isCurrentId:function(){return this.$store.state.isCurrentId}},methods:{selectContacts:function(t){this.$store.dispatch("selectContacts",t)}}}},134:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=(s(127),s(357)),a=s.n(n);e.default={computed:{messageList:function(){return this.$store.state.content.messageList},isCurrent:function(){return this.$store.state.isCurrent},isCurrentId:function(){return this.$store.state.isCurrentId}},directives:{scroll:function(t,e,s){s.context.$nextTick(function(){a()(t).scrollTop(t.scrollHeight)})}}}},135:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:function(){return{textContent:""}},methods:{sendMsg:function(){this.textContent.replace(/(^\s*)|(\s*$)/g,"").length?(this.$store.dispatch("sendMsg",{textContent:this.textContent,currentId:this.$store.state.isCurrentId}),this.textContent=""):alert("不能发送空内容哦～")}}}},136:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s(130),a=s.n(n),r=s(129),i=(s.n(r),s(92)),o=s(131),c=s.n(o),u=s(128);i.a.config.productionTip=!1,new i.a(a()({el:"#app",store:u.a},c.a))},137:function(t,e){},138:function(t,e,s){"use strict";var n,a=s(143),r=s.n(a),i=s(140),o=s.n(i),c=s(139),u={messageList:[],isCurrent:!1},l={initData:function(t,e){var s=t.commit,n=t.rootState;s(c.a,{rootState:n,msg:e})},selectContacts:function(t,e){var s=t.commit,n=t.rootState;s(c.b,{rootState:n,data:e})},sendMsg:function(t,e){var s=t.commit,n=t.rootState;s(c.c,{rootState:n,data:e})}},d=(n={},r()(n,c.a,function(t,e){var s=e.rootState,n=e.msg;s.session=n.msgData,n.callback()}),r()(n,c.b,function(t,e){var s=e.rootState,n=e.data;t.messageList=[],s.session.forEach(function(t){return t.id===n.id?(t.isCurrent=!0,s.isCurrentId=t.id):t.isCurrent=!1,t}),t.messageList=s.session}),r()(n,c.c,function(t,e){var s=e.rootState,n=e.data;s.session.forEach(function(t){if(t.id===n.currentId){var e={content:n.textContent,date:new Date,sender:0};t.message.push(e)}}),t.messageList=s.session,localStorage.setItem("messageData",o()(s.session))}),n);e.a={state:u,actions:l,mutations:d}},139:function(t,e,s){"use strict";s.d(e,"b",function(){return n}),s.d(e,"c",function(){return a}),s.d(e,"a",function(){return r});var n="SELECT_CONTACTS",a="SEND_MSG",r="INIT_DATA"},353:function(t,e){},354:function(t,e){},355:function(t,e){},356:function(t,e){},359:function(t,e,s){s(354);var n=s(48)(s(133),s(364),null,null);t.exports=n.exports},360:function(t,e,s){s(355);var n=s(48)(s(134),s(365),"data-v-4463805e",null);t.exports=n.exports},361:function(t,e,s){s(356);var n=s(48)(s(135),s(366),null,null);t.exports=n.exports},362:function(t,e,s){var n=s(48)(null,s(367),null,null);t.exports=n.exports},363:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"contain clearfix"},[s("user-card"),t._v(" "),s("div",{staticClass:"contact-lists"},[s("contact-lists")],1),t._v(" "),s("div",{staticClass:"chat-content"},[s("message"),t._v(" "),s("message-text")],1)],1)},staticRenderFns:[]}},364:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"list"},t._l(t.session,function(e,n){return s("li",{ref:"listItem",refInFor:!0,class:t.isCurrentId==e.id?"active":"",on:{click:function(s){t.selectContacts(e)}}},[s("img",{attrs:{src:e.user.img}}),t._v(" "),s("div",{staticClass:"info"},[s("p",{staticClass:"name"},[t._v(t._s(e.user.name))]),t._v(" "),s("p",{staticClass:"last-msg"},[t._v("\n        "+t._s(e.message[e.message.length-1].content)+"\n      ")])])])}))},staticRenderFns:[]}},365:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{directives:[{name:"scroll",rawName:"v-scroll",value:t.messageList,expression:"messageList"}],staticClass:"msg-list"},t._l(t.messageList,function(e){return e.isCurrent?s("div",[s("div",{ref:"header",refInFor:!0,staticClass:"header"},[s("p",[t._v(t._s(e.user.name))])]),t._v(" "),s("ul",{ref:"msglist",refInFor:!0,staticClass:"msgList"},t._l(e.message,function(n){return n.content?s("li",{class:[{receive:1===n.sender,own:0===n.sender},"clearfix"]},[s("p",{staticClass:"time"},[s("span",[t._v(t._s(new Date(n.date).toLocaleString()))])]),t._v(" "),s("div",{staticClass:"msg"},[s("div",{staticClass:"img"},[s("img",{attrs:{src:e.user.img}})]),t._v(" "),s("div",{staticClass:"content"},[s("p",[t._v(t._s(n.content))])])])]):t._e()}))]):t._e()}))},staticRenderFns:[]}},366:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"text-input"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.textContent,expression:"textContent"}],attrs:{cols:"93",rows:"3",placeholder:"说点什么"},domProps:{value:t.textContent},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13))return null;t.sendMsg(e)},input:function(e){e.target.composing||(t.textContent=e.target.value)}}}),t._v(" "),s("input",{staticClass:"btn",attrs:{type:"button",value:"发送"},on:{click:t.sendMsg}})])},staticRenderFns:[]}},367:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div")},staticRenderFns:[]}}},[136]);
//# sourceMappingURL=app.c8092e587847b4c1ab58.js.map